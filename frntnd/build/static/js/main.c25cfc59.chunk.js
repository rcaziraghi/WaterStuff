(this.webpackJsonpfrntnd=this.webpackJsonpfrntnd||[]).push([[0],{133:function(e,a,t){e.exports=t(300)},138:function(e,a,t){},144:function(e,a,t){},300:function(e,a,t){"use strict";t.r(a);var r=t(0),o=t.n(r),n=t(16),l=t.n(n),c=(t(138),t(7)),s=t(11),i=t(14),m=t(15),u=(t(143),t(144),t(48)),d=t(17),p=t.n(d),g="https://projetoempreendedor.tk/api/auth/",f=function(e){return console.log("chegou registrar"),console.log(e),p.a.post(g+"registrar",{email:e.email,nomeCompleto:e.nomeCompleto,senha:e.senha,dtNascimento:e.dtNascimento,cidade:e.cidade,siglaEstado:e.estado})},v=function(e,a){return console.log("env",g),p.a.post(g+"login",{email:e,senha:a}).then((function(e){return e.data.accessToken&&localStorage.setItem("usuario",JSON.stringify(e.data)),e.data}))},E=function(){localStorage.removeItem("usuario")},h=function(e){return console.log("chegou registrar"),console.log(e),p.a.post(g+"recuperar/senha",{email:e}).then((function(e){return e.data}))},b=function(){return JSON.parse(localStorage.getItem("usuario"))},N=function(e){var a=Object(r.useState)(""),t=Object(c.a)(a,2),n=t[0],l=t[1],d=Object(r.useState)(""),p=Object(c.a)(d,2),g=p[0],f=p[1],E=Object(r.useState)(!1),h=Object(c.a)(E,2),b=h[0],N=h[1],O=Object(r.useState)(""),j=Object(c.a)(O,2),S=j[0],y=j[1],C=Object(r.useState)(""),k=Object(c.a)(C,2),w=k[0],A=k[1],M=Object(s.c)((function(e){return e.auth})).estaLogado,F=Object(s.c)((function(e){return e.mensagem})).mensagem,x=Object(s.b)();return M?(console.log("Esta logado!"),o.a.createElement(i.a,{to:"/perfil"})):o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"card card-container"},o.a.createElement("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),o.a.createElement("form",{onSubmit:function(a){a.preventDefault(),N(!0),S||w?(console.log("Erro tela login!"),N(!1)):x(function(e,a){return function(t){return v(e,a).then((function(e){return t({type:"SUCESSO_LOGIN",payload:{usuario:e}}),Promise.resolve()}),(function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return console.log("Erro:",a),t({type:"FALHA_LOGIN"}),t({type:"SETAR_MENSAGEM",payload:a}),Promise.reject()}))}}(n,g)).then((function(){console.log("Sucesso login!"),e.history.push("/perfil"),window.location.reload()})).catch((function(){console.log("Erro login!",F,M),N(!1)}))}},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"email"},"Email"),o.a.createElement("input",{type:"text",className:"form-control",name:"email",value:n,onChange:function(e){return function(e){var a=e.target.value;a?Object(u.isEmail)(a)?y(""):y("Este n\xe3o \xe9 um email v\xe1lido."):y("Este campo \xe9 requerido!"),l(a)}(e)}})),S&&o.a.createElement("div",{className:"alert alert-danger",role:"alert"},S),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"senha"},"Senha"),o.a.createElement("input",{type:"password",className:"form-control",name:"senha",value:g,onChange:function(e){return function(e){var a=e.target.value;a?a.length<7?A("\xc9 necess\xe1rio 6 d\xedgitos ao menos na senha!"):A(""):A("Este campo \xe9 requerido!"),f(a)}(e)}})),w&&o.a.createElement("div",{className:"alert alert-danger",role:"alert"},w),o.a.createElement(m.a,{to:"/recuperar/senha",className:"form-group"},"Esqueceu sua senha?"),o.a.createElement("div",{className:"form-group"},o.a.createElement("button",{className:"btn btn-primary btn-block",disabled:b},b&&o.a.createElement("span",{className:"spinner-border spinner-border-sm"}),o.a.createElement("span",null,"Login"))),F&&o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"alert alert-danger",role:"alert"},F)))))},O=t(10),j=t(25),S=t(26),y=t(39),C=t(28),k=t(27),w=(t(237),t(90)),A=t.n(w),M=t(131),F=t(21),x=t.n(F),L=t(130);Object(w.registerLocale)("pt",M.a);var I=function(e){return!e},R=function(e){Object(C.a)(t,e);var a=Object(k.a)(t);function t(e){var r;return Object(j.a)(this,t),(r=a.call(this,e)).aoMudarConcordo=function(e){var a=Object(O.a)({},r.state.estado);a.concordo=e.target.checked,r.setState({estado:a})},r.handleModData=function(e){var a=Object(O.a)({},r.state.estado);a.dados.dtNascimento=e,r.setState({estado:a})},r.aoMudarInput=function(e){e.preventDefault();var a=Object(O.a)({},r.state.estado),t=e.target.name,o=e.target.value;a.erro[t]=r.verificarCampos(t,o),a.dados[t]=o,r.setState({estado:a})},r.handleRegistrar=function(e){e.preventDefault();var a=Object(O.a)({},r.state.estado);a.mensagemErro=[],r.setState({estado:a}),a.concordo?(a.mensagemErro=[],r.setState({estado:a})):(a.mensagemErro.push("Favor concordar com os termos de uso e servi\xe7o."),r.setState({estado:a})),a.dados.senha!==a.dados.confSenha&&(a.erro.senha="As duas senhas n\xe3o conferem.",a.erro.confSenha="As duas senhas n\xe3o conferem.",r.setState({estado:a})),function(e){for(var a=0,t=Object.entries(e.erro);a<t.length;a++){var r=Object(c.a)(t[a],2),o=r[0],n=r[1];if(n)return console.log("erro erro",o,n),!1}for(var l=0,s=Object.entries(e.dados);l<s.length;l++){var i=Object(c.a)(s[l],2),m=i[0],u=i[1];if(!u)return console.log("erro estado",m,u),!1}return!0}(a)&&a.mensagemErro.length<1?(console.log("Estado valido:",a),f(a.dados).then((function(e){console.log("funcionou",e),v(a.dados.email,a.dados.senha).then((function(){r.props.history.push("/perfil"),window.location.reload()}))})).catch((function(e){console.log("erro!",e);var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();console.log("Erro",t),a.mensagemErro.push(t),r.setState({estado:a})}))):(a.mensagemErro.push("Favor verifique o formul\xe1rio e tente novamente."),Object.entries(a.dados).forEach((function(e){var t=Object(c.a)(e,2),o=t[0],n=t[1];a.erro[o]=r.verificarCampos(o,n)})),a.carregando=!1,r.setState({estado:a}),console.log("Estado inv\xe1lido",a))},r.state={estado:{carregando:!1,concordo:!1,mensagemErro:[],dados:{nomeCompleto:"",email:"",senha:"",confSenha:"",dtNascimento:new Date(x()().subtract(16,"years")),cidade:"",estado:""},erro:{nomeCompleto:"",email:"",senha:"",confSenha:"",dtNascimento:"",cidade:"",estado:""},ufs:[{value:"RS",label:"Rio Grande do Sul"},{value:"SC",label:"Santa Catarina"},{value:"PR",label:"Paran\xe1"},{value:"SP",label:"S\xe3o Paulo"}]}},r.handleModData=r.handleModData.bind(Object(y.a)(r)),r.aoMudarInput=r.aoMudarInput.bind(Object(y.a)(r)),r.handleRegistrar=r.handleRegistrar.bind(Object(y.a)(r)),r.verificarCampos=r.verificarCampos.bind(Object(y.a)(r)),r.aoMudarConcordo=r.aoMudarConcordo.bind(Object(y.a)(r)),r.aoMudarEstado=r.aoMudarEstado.bind(Object(y.a)(r)),r}return Object(S.a)(t,[{key:"aoMudarEstado",value:function(e){var a=Object(O.a)({},this.state.estado);a.dados.estado=e.value,this.setState({estado:a})}},{key:"verificarCampos",value:function(e,a){var t,r=Object(O.a)({},this.state.estado);switch(e){case"nomeCompleto":return a.length<4?"O nome completo deve ter no m\xednimo 4 caracteres.":"";case"email":return t=a,Object(u.isEmail)(t)?"":"Favor preencher um email v\xe1lido.";case"senha":return function(e){return e.length<6||e.length>25}(a)?"A senha deve ter no m\xednimo 6 caracteres.":"";case"confSenha":return r.erro.confSenha;case"dtNascimento":return console.log(e,a),I(a)?"Este campo \xe9 requerido.":"";case"cidade":case"estado":return I(a)?"Este campo \xe9 requerido.":"";case"concordo":return a?"Voc\xea deve concordar com os termos de uso e servi\xe7o.":""}return""}},{key:"render",value:function(){var e=this,a=this.state.estado.erro;return o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"card cardRegistrar-container"},o.a.createElement("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),o.a.createElement("form",{onSubmit:this.handleRegistrar,noValidate:!0},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"nomeCompleto"}," Nome completo"),o.a.createElement("input",{type:"text",className:a.nomeCompleto.length>0?"is-invalid form-control":"form-control",name:"nomeCompleto",onChange:this.aoMudarInput})),a.nomeCompleto.length>0&&o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"alert alert-danger",role:"alert"}," ",a.nomeCompleto)),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"email"}," Email "),o.a.createElement("input",{type:"text",className:a.email.length>0?"is-invalid form-control":"form-control",name:"email",onChange:this.aoMudarInput})," "),a.email.length>0&&o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"alert alert-danger",role:"alert"}," ",a.email)),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"senha"}," Senha"),o.a.createElement("input",{type:"password",className:a.senha.length>0?"is-invalid form-control":"form-control",name:"senha",onChange:this.aoMudarInput})),a.senha.length>0&&o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"alert alert-danger",role:"alert"}," ",a.senha)),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password"}," Confirmar senha "),o.a.createElement("input",{type:"password",className:a.confSenha.length>0?"is-invalid form-control":"form-control",name:"confSenha",onChange:this.aoMudarInput})),a.confSenha.length>0&&o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"alert alert-danger",role:"alert"}," ",a.confSenha)),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"dtNascimento"},"Data de nascimento:"),o.a.createElement(A.a,{className:a.dtNascimento.length>0?"is-invalid form-control":"form-control",name:"dtNascimento",dateFormat:"dd/MM/yyyy",selected:this.state.estado.dados.dtNascimento,locale:"pt",onChange:function(a){return e.handleModData(a)}})),a.dtNascimento.length>0&&o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"alert alert-danger",role:"alert"}," ",a.dtNascimento)),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"cidade"}," Cidade: "),o.a.createElement("input",{type:"text",id:"cidade",name:"cidade",className:a.cidade.length>0?"is-invalid form-control":"form-control",onChange:this.aoMudarInput})),a.cidade.length>0&&o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"alert alert-danger",role:"alert"}," ",a.cidade)),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"estado"}," Estado: "),o.a.createElement(L.a,{name:"estado",options:this.state.estado.ufs,onChange:this.aoMudarEstado})),a.estado.length>0&&o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"alert alert-danger",role:"alert"}," ",a.estado)),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{className:"form-group",id:"concordo",name:"concordo",type:"checkbox",onChange:this.aoMudarConcordo})," ","\xa0 Concordo com os termos de uso e servi\xe7o."),this.state.estado.mensagemErro.length>0&&o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.estado.mensagemErro.map((function(e){return o.a.createElement("li",{key:e},e)})))),o.a.createElement("div",{className:"form-group"},o.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.state.carregando}," ",this.state.carregando&&this.state.concordo?o.a.createElement("span",{className:"spinner-border spinner-border-sm"}," "):"Cadastrar"," ")))))}}]),t}(r.Component);function D(){var e=JSON.parse(localStorage.getItem("usuario"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var P="https://projetoempreendedor.tk/api/pagina/",T=function(){return p.a.get(P+"publico")},G=function(){return p.a.get(P+"usuario",{headers:D()})},_=function(){return p.a.get(P+"mod",{headers:D()})},q=function(){return p.a.get(P+"admin",{headers:D()})},B=function(){var e=Object(r.useState)(""),a=Object(c.a)(e,2),t=a[0],n=a[1];return Object(r.useEffect)((function(){T().then((function(e){n(e.data)}),(function(e){var a=e.response&&e.response.data||e.message||e.toString();n(a)}))}),[]),o.a.createElement("div",{className:"container"},o.a.createElement("header",{className:"jumbotron"},o.a.createElement("h3",null,t)))},H=function(){var e=Object(s.c)((function(e){return e.auth})).usuario;return e?o.a.createElement("div",{className:"container"},o.a.createElement("header",{className:"jumbotron"},o.a.createElement("h3",null,"Perfil de: ",o.a.createElement("strong",null,e.nomeCompleto))),o.a.createElement("p",null,o.a.createElement("strong",null,"Id:")," ",e.id),o.a.createElement("p",null,o.a.createElement("strong",null,"Cidade/Estado:")," ",e.cidade,"/",e.siglaEstado),o.a.createElement("p",null,o.a.createElement("strong",null,"Email:")," ",e.email),o.a.createElement("strong",null,"Cargo(s):"),o.a.createElement("ul",null,e.cargos&&e.cargos.map((function(e,a){return o.a.createElement("li",{key:a},e)})))):o.a.createElement(i.a,{to:"/login"})},V=function(){var e=Object(r.useState)(""),a=Object(c.a)(e,2),t=a[0],n=a[1],l=Object(r.useState)("instalacao"),s=Object(c.a)(l,2),i=s[0],u=s[1],d=Object(r.useState)(!1),p=Object(c.a)(d,2),g=p[0],f=p[1];return Object(r.useEffect)((function(){G().then((function(e){n(e.data),f(!0)}),(function(e){console.log("erro",e);var a=e.response.data.message.toString();console.log("content",a),n(a),f(!1)}))}),[]),o.a.createElement("div",{className:"container"},o.a.createElement("header",null,o.a.createElement("h5",{className:"col border"},t)),g&&o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-4"},o.a.createElement("div",{className:"list-group",id:"list-tab",role:"tablist"},o.a.createElement("button",{className:"instalacao"===i?"list-group-item list-group-item-action active":"list-group-item list-group-item-action",id:"instalacao","data-toggle":"list",onClick:function(){return u("instalacao")},role:"tab","aria-controls":"home"},"Liga\xe7\xe3o de \xe1gua"),o.a.createElement("button",{className:"fatura"===i?"list-group-item list-group-item-action active":"list-group-item list-group-item-action",id:"fatura","data-toggle":"list",onClick:function(){return u("fatura")},role:"tab","aria-controls":"profile"},"Fatura"),o.a.createElement("button",{className:"solicitacoes"===i?"list-group-item list-group-item-action active":"list-group-item list-group-item-action",id:"solicitacoes","data-toggle":"list",onClick:function(){return u("solicitacoes")},role:"tab","aria-controls":"messages"},"Solicita\xe7\xf5es"),o.a.createElement("button",{className:"protocolos"===i?"list-group-item list-group-item-action active":"list-group-item list-group-item-action",id:"protocolos","data-toggle":"list",onClick:function(){return u("protocolos")},role:"tab","aria-controls":"settings"},"Protocolos"),o.a.createElement("button",{className:"avaliacoes"===i?"list-group-item list-group-item-action active":"list-group-item list-group-item-action",id:"avaliacoes","data-toggle":"list",onClick:function(){return u("avaliacoes")},role:"tab","aria-controls":"settings"},"Avalia\xe7\xf5es"))),o.a.createElement("div",{className:"col-8"},o.a.createElement("div",{className:"tab-content",id:"nav-tabContent"},o.a.createElement("div",{className:"instalacao"===i?"tab-pane fade show active":"tab-pane fade",id:"list-instalacao",role:"tabpanel","aria-labelledby":"instalacao"},o.a.createElement("ul",{className:"list-group list-group-flush"},o.a.createElement("li",{className:"list-group-item"},o.a.createElement(m.a,{to:"/instalacao/cadastro",className:"form-group"},"Cadastrar instala\xe7\xe3o de \xe1gua")),o.a.createElement("li",{className:"list-group-item"},o.a.createElement(m.a,{to:"/instalacao/listar",className:"form-group"},"Lista de instala\xe7\xe3o de \xe1gua")))),o.a.createElement("div",{className:"fatura"===i?"tab-pane fade show active":"tab-pane fade",id:"list-fatura",role:"tabpanel","aria-labelledby":"fatura"},o.a.createElement("ul",{className:"list-group list-group-flush"},o.a.createElement("li",{className:"list-group-item"},o.a.createElement(m.a,{to:"/fatura/listar",className:"form-group"},"Hist\xf3rico de faturas")))),o.a.createElement("div",{className:"solicitacoes"===i?"tab-pane fade show active":"tab-pane fade",id:"list-solicitacoes",role:"tabpanel","aria-labelledby":"solicitacoes"},"Em breve..."),o.a.createElement("div",{className:"protocolos"===i?"tab-pane fade show active":"tab-pane fade",id:"list-protocolos",role:"tabpanel","aria-labelledby":"protocolos"},o.a.createElement("ul",{className:"list-group list-group-flush"},o.a.createElement("li",{className:"list-group-item"},o.a.createElement(m.a,{to:"/denuncia/criar",className:"form-group"},"Protocolar den\xfancia")),o.a.createElement("li",{className:"list-group-item"},o.a.createElement(m.a,{to:"/denuncia/listar",className:"form-group"},"Listar den\xfancias protocoladas")))),o.a.createElement("div",{className:"avaliacoes"===i?"tab-pane fade show active":"tab-pane fade",id:"list-avaliacoes",role:"tabpanel","aria-labelledby":"avaliacoes"},o.a.createElement("ul",{className:"list-group list-group-flush"},o.a.createElement("li",{className:"list-group-item"},o.a.createElement(m.a,{to:"/avaliacao/criar",className:"form-group"},"Avaliar")),o.a.createElement("li",{className:"list-group-item"},o.a.createElement(m.a,{to:"/avaliacao/listar",className:"form-group"},"Listar avalia\xe7\xf5es"))))))))},J=function(e){var a=Object(r.useState)(""),t=Object(c.a)(a,2),n=t[0],l=t[1];return Object(s.c)((function(e){return e.auth})).estaLogado||(e.history.push("/login"),window.location.reload()),Object(r.useEffect)((function(){_().then((function(e){l(e.data)}),(function(e){var a=e.resposta&&e.resposta.data&&e.resposta.data.mensagem||e.message||e.toString();l(a)}))}),[]),o.a.createElement("div",{className:"container"},o.a.createElement("header",{className:"jumbotron"},o.a.createElement("h3",null,n)))},U=function(e){var a=Object(r.useState)(""),t=Object(c.a)(a,2),n=t[0],l=t[1];return Object(s.c)((function(e){return e.auth})).estaLogado||(e.history.push("/login"),window.location.reload()),Object(r.useEffect)((function(){q().then((function(e){l(e.data)}),(function(e){var a=e.resposta&&e.resposta.data&&e.resposta.data.mensagem||e.message||e.toString();l(a)}))}),[]),o.a.createElement("div",{className:"container"},o.a.createElement("header",{className:"jumbotron"},o.a.createElement("h3",null,n)))},W=function(e){Object(C.a)(t,e);var a=Object(k.a)(t);function t(e){var r;return Object(j.a)(this,t),(r=a.call(this,e)).aoMudarEmail=function(e){e.preventDefault();var a=e.target.value,t=Object(O.a)({},r.state.erro);console.log("aoMudarEmail",a),t.email=Object(u.isEmail)(a)?"":"Email inv\xe1lido!",console.log("Resultado",t.email),r.setState({email:a,erro:t})},r.handleRecuperarSenha=function(e){e.preventDefault(),r.setState({carregando:!0}),!function(e){var a=e.erro,t=!1;return Object.values(a).forEach((function(e){t=!(e.length>0)})),t}(r.state)?(console.log("Invalido",r.state),r.setState({carregando:!1})):(console.log("Valido",r.state),h(r.state.email).then((function(e){console.log("response",e),r.setState({carregando:!1,sucesso:{email:e.message}}),console.log("Email encontrado e recupera\xe7\xe3o de senha enviada."),console.log("State",r.state)})).catch((function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();r.setState({carregando:!1,erro:{email:a}}),console.log("Erro!",a),console.log("State",r.state)})))},r.state={carregando:!1,email:"",erro:{email:""},sucesso:{email:""}},r}return Object(S.a)(t,[{key:"render",value:function(){var e=this.state,a=e.erro,t=e.sucesso;return o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"card card-container"},o.a.createElement("form",{onSubmit:this.handleRecuperarSenha,noValidate:!0},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"email"},"Email"),o.a.createElement("input",{type:"text",className:a.email.length>0?"is-invalid form-control":"form-control",name:"email",value:this.state.email,onChange:this.aoMudarEmail})),a.email.length>0&&o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"alert alert-danger",role:"alert"},a.email)),t.email.length>0&&o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"alert alert-primary",role:"alert"},t.email)),o.a.createElement("div",{className:"form-group"},o.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.state.carregando},this.state.carregando?o.a.createElement("span",{className:"spinner-border spinner-border-sm"}):"Recuperar senha")))))}}]),t}(r.Component);t(297).config();var K=function(e){return console.log("chegou cadastrar"),console.log("dados",e),console.log("rota","https://projetoempreendedor.tk/api/instalacao/"),p.a.post("https://projetoempreendedor.tk/api/instalacao/cadastrar",{codConsumidor:e.codConsumidor,email:e.email,cpf:e.cpf},{headers:D()}).then((function(e){return console.log("resposta instal servi",e),e.data}))},$=function(e){return console.log("listar",e),p.a.post("https://projetoempreendedor.tk/api/instalacao/listar",{email:e},{headers:D()}).then((function(e){return console.log("resposta listar",e),e.data}))},z=function(e){var a=Object(r.useState)(""),t=Object(c.a)(a,2),n=t[0],l=t[1],i=Object(r.useState)(""),m=Object(c.a)(i,2),u=m[0],d=m[1],p=Object(r.useState)(""),g=Object(c.a)(p,2),f=g[0],v=g[1],E=Object(r.useState)(!1),h=Object(c.a)(E,2),b=h[0],N=h[1],O=Object(r.useState)(""),j=Object(c.a)(O,2),S=j[0],y=j[1],C=Object(r.useState)(""),k=Object(c.a)(C,2),w=k[0],A=k[1],M=Object(s.c)((function(e){return e.auth})),F=M.estaLogado,x=M.usuario,L=Object(s.c)((function(e){return e.mensagem})).mensagem,I=Object(s.b)();F||(e.history.push("/login"),window.location.reload());return o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"card card-container"},o.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),N(!0),w||S||!F)console.log("Erro tela login!");else{console.log("usuario",x);var a={codConsumidor:u,email:x.email,cpf:n};I(function(e){return function(a){return K(e).then((function(e){return console.log("resposta",e),a({type:"INSTALACAO_CADASTRADA"}),a({type:"SETAR_MENSAGEM",payload:e.message}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return a({type:"SETAR_MENSAGEM",payload:t}),Promise.reject()}))}}(a)).then((function(){v(!1),console.log("Sucesso Cadastro!")})).catch((function(){console.log("Erro cadastro!",L,F),v(!0)}))}N(!1)}},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"email"},"CPF"),o.a.createElement("input",{type:"text",className:"form-control",name:"cpf",value:n,onChange:function(e){var a=e.target.value;a?!function(e){if(""===(e=e.replace(/[^\d]+/g,"")))return!1;if(11!==e.length||"00000000000"===e||"11111111111"===e||"22222222222"===e||"33333333333"===e||"44444444444"===e||"55555555555"===e||"66666666666"===e||"77777777777"===e||"88888888888"===e||"99999999999"===e)return!1;for(var a=0,t=0;t<9;t++)a+=parseInt(e.charAt(t))*(10-t);var r=11-a%11;if(10!==r&&11!==r||(r=0),r!==parseInt(e.charAt(9)))return!1;a=0;for(var o=0;o<10;o++)a+=parseInt(e.charAt(o))*(11-o);return 10!==(r=11-a%11)&&11!==r||(r=0),r===parseInt(e.charAt(10))}(a)?y("CPF inv\xe1lido!"):y(""):y("CPF requerido!"),l(a)}})),S&&o.a.createElement("div",{className:"alert alert-danger",role:"alert"},S),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"senha"},"C\xf3digo de consumidor"),o.a.createElement("input",{type:"text",className:"form-control",name:"codConsumidor",value:u,onChange:function(e){var a=e.target.value;A(a?"":"Este campo \xe9 requerido!"),d(a)}})),w&&o.a.createElement("div",{className:"alert alert-danger",role:"alert"},w),o.a.createElement("div",{className:"form-group"},o.a.createElement("button",{className:"btn btn-primary btn-block",disabled:b},b&&o.a.createElement("span",{className:"spinner-border spinner-border-sm"}),o.a.createElement("span",null,"Cadastrar"))),L&&o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:f?"alert alert-danger":"alert alert-primary",role:"alert"},L)))))};t(61);x.a.locale("pt");var Q=function(e){Object(C.a)(t,e);var a=Object(k.a)(t);function t(e){var r;return Object(j.a)(this,t),(r=a.call(this,e)).state={usuario:b(),instalacoes:[]},r}return Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.usuario||(this.props.history.push("/login"),window.location.reload());var a=Object(O.a)({},this.state);console.log("Estado",a),$(a.usuario.email).then((function(t){console.log("response",t.instalacoes),a.instalacoes=t.instalacoes,e.setState({usuario:a.usuario,instalacoes:a.instalacoes})})).catch((function(e){console.log("error",e)}))}},{key:"render",value:function(){var e=this.state.instalacoes.map((function(e){return o.a.createElement("div",{className:"row",key:["row",e.id].toString()},o.a.createElement("div",{className:"col border",key:["id",e.id].toString()},e.id),o.a.createElement("div",{className:"col border",key:["codConsumidor",e.codConsumidor].toString()},e.codConsumidor),o.a.createElement("div",{className:"col border",key:["cpf",e.cpf].toString()},e.cpf),o.a.createElement("div",{className:"col border",key:["createdAt",e.createdAt].toString()},x()(e.createdAt).format("LLL")),o.a.createElement("div",{className:"col border",key:["updatedAt",e.id].toString()},x()(e.updatedAt).format("LLL")))}));return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"card card-body"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col border"},"ID:"),o.a.createElement("div",{className:"col border"},"C\xf3digo de consumidor:"),o.a.createElement("div",{className:"col border"},"CPF:"),o.a.createElement("div",{className:"col border"},"Criado em:"),o.a.createElement("div",{className:"col border"},"Atualizado em:")),e))}}]),t}(r.Component),X=function(e){return console.log("listar",e),console.log("rota","https://projetoempreendedor.tk/api/fatura/"),p.a.post("https://projetoempreendedor.tk/api/fatura/listar",{email:e},{headers:D()}).then((function(e){return console.log("resposta listar",e),e.data}))};x.a.locale("pt");var Y=function(e){Object(C.a)(t,e);var a=Object(k.a)(t);function t(e){var r;return Object(j.a)(this,t),(r=a.call(this,e)).filtro=function(e){if(e.target.value){var a=r.state.faturas.filter((function(a){return console.log(a[e.target.id]),0===a[e.target.id].toString().indexOf(e.target.value)}));console.log("target value",e.target.value),console.log("lista filtrada",a),r.setState({faturasFiltradas:a})}else r.setState({faturasFiltradas:r.state.faturas})},r.state={usuario:b(),faturas:[],faturasFiltradas:[]},r}return Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.usuario||(this.props.history.push("/login"),window.location.reload());var a=Object(O.a)({},this.state);console.log("Estado",a),X(a.usuario.email).then((function(t){console.log("response",t.faturas),a.faturas=t.faturas,e.setState({usuario:a.usuario,faturas:a.faturas,faturasFiltradas:a.faturas})})).catch((function(e){console.log("error",e)}))}},{key:"render",value:function(){var e=!this.state.faturasFiltradas.length>0?o.a.createElement("div",null,"Nenhuma fatura encontrada"):this.state.faturasFiltradas.map((function(e){return o.a.createElement("div",{className:"row",key:["row",e.id].toString()},o.a.createElement("div",{className:"col border",key:["id",e.id].toString()},e.id),o.a.createElement("div",{className:"col border",key:["instalacaoId",e.instalacaoId].toString()},e.instalacaoId),o.a.createElement("div",{className:"col border",key:["numFatura",e.numFatura].toString()},e.numFatura),o.a.createElement("div",{className:"col border",key:["ano",e.ano].toString()},e.ano),o.a.createElement("div",{className:"col border",key:["mes",e.mes].toString()},e.mes),o.a.createElement("div",{className:"col border",key:["valor",e.valor].toString()},"R$ ",e.valor),o.a.createElement("div",{className:"col border",key:["situacao",e.situacao].toString()},e.situacao),o.a.createElement("div",{className:"col border",key:["createdAt",e.createdAt].toString()},x()(e.createdAt).format("LLL")))}));return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title"},"Filtros:"),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement("input",{type:"text",className:"form-control",id:"id",placeholder:"Filtro Id",onChange:this.filtro})),o.a.createElement("div",{className:"col"},o.a.createElement("input",{type:"text",className:"form-control",id:"instalacaoId",placeholder:"Filtro inst. Id",onChange:this.filtro})),o.a.createElement("div",{className:"col"},o.a.createElement("input",{type:"text",className:"form-control",id:"numFatura",placeholder:"Filtro No fat",onChange:this.filtro})),o.a.createElement("div",{className:"col"},o.a.createElement("input",{type:"text",className:"form-control",id:"ano",placeholder:"Filtro Ano",onChange:this.filtro})),o.a.createElement("div",{className:"col"},o.a.createElement("input",{type:"text",className:"form-control",id:"mes",placeholder:"Filtro M\xeas",onChange:this.filtro})),o.a.createElement("div",{className:"col"},o.a.createElement("input",{type:"text",className:"form-control",id:"valor",placeholder:"Filtro Valor",onChange:this.filtro})),o.a.createElement("div",{className:"col"},o.a.createElement("input",{type:"text",className:"form-control",id:"situacao",placeholder:"Filtro Sit",onChange:this.filtro})),o.a.createElement("div",{className:"col"},o.a.createElement("input",{type:"text",className:"form-control",id:"createdAt",placeholder:"Filtro Data",onChange:this.filtro})))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col border"},"ID:"),o.a.createElement("div",{className:"col border"},"ID instala\xe7\xe3o:"),o.a.createElement("div",{className:"col border"},"N\xfamero da fatura:"),o.a.createElement("div",{className:"col border"},"Ano:"),o.a.createElement("div",{className:"col border"},"M\xeas:"),o.a.createElement("div",{className:"col border"},"Valor:"),o.a.createElement("div",{className:"col border"},"Situa\xe7\xe3o:"),o.a.createElement("div",{className:"col border"},"Data:")),e))}}]),t}(r.Component),Z=t(308),ee=t(306),ae=t(309);x.a.locale("pt");var te=function(e){Object(C.a)(t,e);var a=Object(k.a)(t);function t(){var e;Object(j.a)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=a.call.apply(a,[this].concat(o))).fechar=function(a){e.props.fecharModal&&e.props.fecharModal(a)},e}return Object(S.a)(t,[{key:"render",value:function(){return console.log("show",this.props.show),this.props.show?o.a.createElement(Z.a,{show:this.props.show,onHide:this.fechar,ref:this.props.ref,animation:!1},o.a.createElement(Z.a.Header,{closeButton:!0},o.a.createElement(Z.a.Title,null,this.props.avaliacao.titulo,o.a.createElement(ee.a,{variant:"light"},this.props.avaliacao.nota))),o.a.createElement(Z.a.Body,null,o.a.createElement("h3",null,this.props.avaliacao.atendimento),this.props.avaliacao.observacoes),o.a.createElement(Z.a.Footer,null,o.a.createElement("small",{className:"text-muted"},x()(this.props.avaliacao.createdAt).fromNow()),o.a.createElement(ae.a,{variant:"secondary",onClick:this.fechar},"Fechar"))):(console.log("hoje nao"),null)}}]),t}(r.Component),re=t(310),oe=t(307),ne=function(e){return p.a.post("https://projetoempreendedor.tk/api/avaliacao/criar",{titulo:e.titulo,nota:e.nota,atendimento:e.atendimento,observacoes:e.observacoes,usuario:e.usuario},{headers:D()}).then((function(e){return console.log("avaliService",e),e.data}))},le=function(e){return p.a.post("https://projetoempreendedor.tk/api/avaliacao/listar",{usuario:e},{headers:D()}).then((function(e){return console.log("resposta listar",e),e.data}))};x.a.locale("pt");var ce=function(e){Object(C.a)(t,e);var a=Object(k.a)(t);function t(e){var r;return Object(j.a)(this,t),(r=a.call(this,e)).objectFindByKey=function(e,a,t){for(var r=0;r<e.length;r++)if(e[r][a]===t)return e[r];return null},r.abrirModal=function(e){var a=r.objectFindByKey(r.state.avaliacoes,"id",e);console.log("busca id",a),r.setState({avaliacaoModal:a,modalAberto:!0})},r.fecharModal=function(){console.log("fechar modal"),r.setState({modalAberto:!1})},r.wrapper=o.a.createRef(),r.state={avaliacoes:[],avaliacaoModal:{},modalAberto:!1,usuario:b()},r}return Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.usuario||(this.props.history.push("/login"),window.location.reload()),le(this.state.usuario).then((function(a){console.log("avaliacoes",a.avaliacoes),e.setState({avaliacoes:a.avaliacoes})})).catch((function(e){console.log("erro",e)}))}},{key:"render",value:function(){var e=this,a=!this.state.avaliacoes.length>0?o.a.createElement("div",null,"Nenhuma avalia\xe7\xe3o encontrada"):this.state.avaliacoes.map((function(a){return o.a.createElement(re.a,{key:["card",a.id]},o.a.createElement(re.a.Body,{key:["cardBody",a.id]},o.a.createElement(re.a.Title,null,a.atendimento),o.a.createElement(re.a.Text,null,o.a.createElement("strong",null,a.titulo," -",o.a.createElement(ee.a,{variant:"light"},a.nota)),o.a.createElement("br",null),a.observacoes),o.a.createElement(re.a.Text,null,o.a.createElement("small",{className:"text-muted"},x()(a.createdAt).fromNow())),o.a.createElement(re.a.Link,{onClick:function(){return e.abrirModal(a.id)}},"Detalhes")))}));return o.a.createElement("div",null,o.a.createElement(oe.a,null,a),o.a.createElement(te,{avaliacao:this.state.avaliacaoModal,show:this.state.modalAberto,fecharModal:this.fecharModal,key:this.wrapper}))}}]),t}(r.Component),se=function(e){var a=Object(s.c)((function(e){return e.auth})),t=a.estaLogado,n=a.usuario,l=Object(s.c)((function(e){return e.mensagem})).mensagem;t||(e.history.push("/login"),window.location.reload());var i=Object(r.useState)(""),m=Object(c.a)(i,2),u=m[0],d=m[1],p=Object(r.useState)(""),g=Object(c.a)(p,2),f=g[0],v=g[1],E=Object(r.useState)(""),h=Object(c.a)(E,2),b=h[0],N=h[1],O=Object(r.useState)(""),j=Object(c.a)(O,2),S=j[0],y=j[1],C=Object(r.useState)(""),k=Object(c.a)(C,2),w=k[0],A=k[1],M=Object(r.useState)(""),F=Object(c.a)(M,2),x=F[0],L=F[1],I=Object(r.useState)(""),R=Object(c.a)(I,2),D=R[0],P=R[1],T=Object(r.useState)(""),G=Object(c.a)(T,2),_=G[0],q=G[1],B=Object(r.useState)(""),H=Object(c.a)(B,2),V=H[0],J=H[1],U=Object(r.useState)(""),W=Object(c.a)(U,2),K=W[0],$=W[1],z=Object(s.b)(),Q=[10,9,8,7,6,5,4,3,2,1,0].map((function(e){return o.a.createElement("option",{key:e},e)})),X=function(e){return!!e},Y=function(e){return!!isNaN(e)};return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"card"},o.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),A(!0),X(u)?L(""):L("Preencher t\xedtulo!"),console.log("nota",f),!f)return P("Preencher nota!"),void A(!1);if(P(""),Y(f))return P("Preencher nota!"),void A(!1);(P(""),console.log("mensagemNota",D),X(b)?q(""):q("Preencher atendimento!"),x||D||_)||z(function(e){return function(a){return ne(e).then((function(e){return a({type:"SETAR_MENSAGEM",payload:e.message}),Promise.resolve(e)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return a({type:"SETAR_MENSAGEM",payload:t}),Promise.reject(t)}))}}({titulo:u,nota:f,atendimento:b,observacoes:S,usuario:n})).then((function(e){console.log("mensagem sucesso",e),J(e.message),$("s")})).catch((function(e){console.log("mensagem erro",e),J(e),$("e")}));A(!1)}},o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"col-md-10"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"titulo"},"T\xedtulo"),o.a.createElement("input",{type:"text",className:"form-control",name:"titulo",value:u,onChange:function(e){var a=e.target.value;X(a)?L(""):L("Preencher t\xedtulo!"),d(a)}}),x&&o.a.createElement("div",{className:"alert alert-danger",role:"alert"},x))),o.a.createElement("div",{className:"col-md-2"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"titulo"},"Nota"),o.a.createElement("select",{onChange:function(e){e.preventDefault();var a=e.target.value;v(a),X(a)?P(""):P("Preencher nota!"),Y(a)?P("Preencher nota!"):P(""),console.log("ao mudar nota",a)},value:f,className:"custom-select",id:"inputNota"},o.a.createElement("option",{defaultValue:!0},"Escolha"),Q),D&&o.a.createElement("div",{className:"alert alert-danger",role:"alert"},D)))),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col"},o.a.createElement("label",{htmlFor:"titulo"},"Atendimento"),o.a.createElement("input",{type:"text",className:"form-control",name:"atendimento",value:b,onChange:function(e){var a=e.target.value;X(a)?q(""):q("Preencher atendimento!"),N(a)}}),_&&o.a.createElement("div",{className:"alert alert-danger",role:"alert"},_))),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col"},o.a.createElement("label",{htmlFor:"titulo"},"Observa\xe7\xf5es"),o.a.createElement("textarea",{type:"text",className:"form-control",name:"observacoes",value:S,onChange:function(e){var a=e.target.value;y(a)}}))),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col"},o.a.createElement("button",{className:"btn btn-primary btn-block",disabled:w},w&&o.a.createElement("span",{className:"spinner-border spinner-border-sm"}),o.a.createElement("span",null,"Avaliar")))),V&&o.a.createElement("div",{className:"form-group row"},o.a.createElement("div",{className:"form-group col"},o.a.createElement("div",{className:"e"===K?"alert alert-danger":"alert alert-primary",role:"alert"},l))))))},ie=t(22),me=Object(ie.a)(),ue=t(40),de=t(128),pe=t(129),ge=JSON.parse(localStorage.getItem("usuario")),fe=ge?{estaLogado:!0,usuario:ge}:{estaLogado:!1,usuario:null},ve={},Ee=Object(ue.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,a=arguments.length>1?arguments[1]:void 0,t=a.type,r=a.payload;switch(t){case"SUCESSO_REGISTRO":case"FALHA_REGISTRO":return Object(O.a)(Object(O.a)({},e),{},{estaLogado:!1});case"SUCESSO_LOGIN":return Object(O.a)(Object(O.a)({},e),{},{estaLogado:!0,usuario:r.usuario});case"FALHA_LOGIN":case"LOGOUT":return Object(O.a)(Object(O.a)({},e),{},{estaLogado:!1,usuario:null});default:return e}},mensagem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,a=arguments.length>1?arguments[1]:void 0,t=a.type,r=a.payload;switch(t){case"SETAR_MENSAGEM":return{mensagem:r};case"LIMPAR_MENSAGEM":return{mensagem:""};default:return e}}}),he=function(){var e=Object(r.useState)(!1),a=Object(c.a)(e,2),t=a[0],n=a[1],l=Object(r.useState)(!1),u=Object(c.a)(l,2),d=u[0],p=u[1],g=Object(s.c)((function(e){return e.auth})).usuario,f=Object(s.b)();Object(r.useEffect)((function(){me.listen((function(e){f({type:"LIMPAR_MENSAGEM"})}))}),[f]),Object(r.useEffect)((function(){g&&(n(g.cargos.includes("CARGO_MODERADOR")),p(g.cargos.includes("CARGO_ADMIN")))}),[g]);return o.a.createElement(i.c,{history:me},o.a.createElement("div",null,o.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},o.a.createElement(m.a,{to:"/",className:"navbar-brand"},"WaterStuff"),o.a.createElement("div",{className:"navbar-nav mr-auto"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(m.a,{to:"/home",className:"nav-link"},"Home")),t&&o.a.createElement("li",{className:"nav-item"},o.a.createElement(m.a,{to:"/mod",className:"nav-link"},"Modera\xe7\xe3o")),d&&o.a.createElement("li",{className:"nav-item"},o.a.createElement(m.a,{to:"/admin",className:"nav-link"},"Administra\xe7\xe3o")),g&&o.a.createElement("li",{className:"nav-item"},o.a.createElement(m.a,{to:"/usuario",className:"nav-link"},"Seus servi\xe7os"))),g?o.a.createElement("div",{className:"navbar-nav ml-auto"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(m.a,{to:"/perfil",className:"nav-link"},g.email)),o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{href:"/login",className:"nav-link",onClick:function(){f((function(e){E(),e({type:"LOGOUT"})}))}},"LogOut"))):o.a.createElement("div",{className:"navbar-nav ml-auto"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(m.a,{to:"/login",className:"nav-link"},"Login")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(m.a,{to:"/registrar",className:"nav-link"},"Registrar")))),o.a.createElement("div",{className:"container mt-3"},o.a.createElement(i.d,null,o.a.createElement(i.b,{exact:!0,path:["/","/home"],component:B}),o.a.createElement(i.b,{exact:!0,path:"/login",component:N}),o.a.createElement(i.b,{exact:!0,path:"/registrar",component:R}),o.a.createElement(i.b,{exact:!0,path:"/perfil",component:H}),o.a.createElement(i.b,{exact:!0,path:"/recuperar/senha",component:W}),o.a.createElement(i.b,{exact:!0,path:"/instalacao/cadastro",component:z}),o.a.createElement(i.b,{exact:!0,path:"/instalacao/listar",component:Q}),o.a.createElement(i.b,{exact:!0,path:"/fatura/listar",component:Y}),o.a.createElement(i.b,{exact:!0,path:"/avaliacao/listar",component:ce}),o.a.createElement(i.b,{exact:!0,path:"/avaliacao/criar",component:se}),o.a.createElement(i.b,{path:"/usuario",component:V}),o.a.createElement(i.b,{path:"/mod",component:J}),o.a.createElement(i.b,{path:"/admin",component:U})))))},be=function(){var e=[pe.a],a=Object(ue.createStore)(Ee,Object(de.composeWithDevTools)(ue.applyMiddleware.apply(void 0,e)));return o.a.createElement(s.a,{store:a},o.a.createElement(he,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[133,1,2]]]);
//# sourceMappingURL=main.c25cfc59.chunk.js.map